---
export interface Props {
    users: {
        data: Array<{
            id: number;
            username: string;
            email: string;
            role: string;
            is_active: boolean;
            created_at: string;
            updated_at: string;
        }>;
    };
}

const { users } = Astro.props;
---

<div class="section">
    <h2>📋 用户列表</h2>
    <table class="users-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>用户名</th>
                <th>邮箱</th>
                <th>角色</th>
                <th>状态</th>
                <th>创建时间</th>
                <th>最后更新</th>
            </tr>
        </thead>
        <tbody>
            {
                users.data.map((user) => (
                    <tr>
                        <td>{user.id}</td>
                        <td class="username-cell" title={user.username}>
                            {user.username}
                        </td>
                        <td title={user.email}>{user.email}</td>
                        <td>
                            <span class="role-tag">{user.role}</span>
                        </td>
                        <td>
                            <span
                                class={
                                    user.is_active
                                        ? 'status-active'
                                        : 'status-inactive'
                                }>
                                {user.is_active ? '激活' : '未激活'}
                            </span>
                        </td>
                        <td>
                            {new Date(user.created_at).toLocaleString('zh-CN')}
                        </td>
                        <td>
                            {new Date(user.updated_at).toLocaleString('zh-CN')}
                        </td>
                    </tr>
                ))
            }
        </tbody>
    </table>
</div>

<style>
    .section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .users-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }

    .users-table th,
    .users-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
    }

    .users-table th {
        background-color: #f9fafb;
        font-weight: 600;
        color: #374151;
    }

    .users-table tr:hover {
        background-color: #f9fafb;
    }

    .username-cell {
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .status-active {
        color: #10b981;
        font-weight: bold;
    }

    .status-inactive {
        color: #ef4444;
        font-weight: bold;
    }
</style>
